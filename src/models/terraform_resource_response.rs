/*
 * Qovery API
 *
 * - Qovery is the fastest way to deploy your full-stack apps on any Cloud provider. - ℹ️ The API is stable and still in development.
 *
 * The version of the OpenAPI document: 1.0.4
 * Contact: support+api+documentation@qovery.com
 * Generated by: https://openapi-generator.tech
 */

use crate::models;
use serde::{Deserialize, Serialize};

/// TerraformResourceResponse : A Terraform resource from a deployment execution
#[derive(Clone, Default, Debug, PartialEq, Serialize, Deserialize)]
pub struct TerraformResourceResponse {
    /// Unique identifier for this resource record
    #[serde(rename = "id")]
    pub id: uuid::Uuid,
    /// Type of the Terraform resource (e.g., aws_instance, aws_s3_bucket)
    #[serde(rename = "resourceType")]
    pub resource_type: String,
    /// Name of the resource as defined in Terraform configuration
    #[serde(rename = "name")]
    pub name: String,
    /// Full address of the resource (e.g., aws_instance.web_server)
    #[serde(rename = "address")]
    pub address: String,
    /// Terraform provider name (e.g., aws, google, azurerm)
    #[serde(rename = "provider")]
    pub provider: String,
    /// Resource mode (managed or data source)
    #[serde(rename = "mode")]
    pub mode: Mode,
    /// All resource attributes as key-value pairs
    #[serde(rename = "attributes")]
    pub attributes: std::collections::HashMap<String, serde_json::Value>,
    /// Timestamp when the resource was extracted from Terraform state
    #[serde(rename = "extractedAt")]
    pub extracted_at: String,
    /// Most important attributes for this resource type (for display)
    #[serde(rename = "keyAttributes")]
    pub key_attributes: Vec<models::TerraformResourceAttribute>,
}

impl TerraformResourceResponse {
    /// A Terraform resource from a deployment execution
    pub fn new(
        id: uuid::Uuid,
        resource_type: String,
        name: String,
        address: String,
        provider: String,
        mode: Mode,
        attributes: std::collections::HashMap<String, serde_json::Value>,
        extracted_at: String,
        key_attributes: Vec<models::TerraformResourceAttribute>,
    ) -> TerraformResourceResponse {
        TerraformResourceResponse {
            id,
            resource_type,
            name,
            address,
            provider,
            mode,
            attributes,
            extracted_at,
            key_attributes,
        }
    }
}
/// Resource mode (managed or data source)
#[derive(Clone, Copy, Debug, Eq, PartialEq, Ord, PartialOrd, Hash, Serialize, Deserialize)]
pub enum Mode {
    #[serde(rename = "managed")]
    Managed,
    #[serde(rename = "data")]
    Data,
}

impl Default for Mode {
    fn default() -> Mode {
        Self::Managed
    }
}
